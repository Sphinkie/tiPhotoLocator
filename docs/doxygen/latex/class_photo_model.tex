\doxysection{Photo\+Model Class Reference}
\hypertarget{class_photo_model}{}\label{class_photo_model}\index{PhotoModel@{PhotoModel}}


The \doxylink{class_photo_model}{Photo\+Model} class manages a list of photo data.  




{\ttfamily \#include $<$Photo\+Model.\+h$>$}

Inheritance diagram for Photo\+Model\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_photo_model}
\end{center}
\end{figure}
\doxysubsubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{class_photo_model_afae44c634ae6bf2b6b6c2e2a19269159}\label{class_photo_model_afae44c634ae6bf2b6b6c2e2a19269159} 
enum \mbox{\hyperlink{class_photo_model_afae44c634ae6bf2b6b6c2e2a19269159}{Roles}} \{ \newline
{\bfseries Filename\+Role} = Qt\+::User\+Role
, {\bfseries Image\+Url\+Role}
, {\bfseries Latitude\+Role}
, {\bfseries Longitude\+Role}
, \newline
{\bfseries Has\+GPSRole}
, {\bfseries Is\+Selected\+Role}
, {\bfseries Is\+Marker\+Role}
, {\bfseries Is\+Welcome\+Role}
, \newline
{\bfseries Inside\+Circle\+Role}
, {\bfseries To\+Be\+Saved\+Role}
, {\bfseries Date\+Time\+Original\+Role}
, {\bfseries Cam\+Model\+Role}
, \newline
{\bfseries Make\+Role}
, {\bfseries Image\+Width\+Role}
, {\bfseries Image\+Height\+Role}
, {\bfseries Creator\+Role}
, \newline
{\bfseries Shutter\+Speed\+Role}
, {\bfseries FNumber\+Role}
, {\bfseries City\+Role}
, {\bfseries Country\+Role}
, \newline
{\bfseries Description\+Role}
, {\bfseries Description\+Writer\+Role}
, {\bfseries Software\+Role}
, {\bfseries Keywords\+Role}
 \}
\begin{DoxyCompactList}\small\item\em The Roles enum lists the roles associated to each attribute of a \doxylink{struct_photo}{Photo}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_photo_model_a8a98d5f81789881189e179d6059c1586}{append}} (const QString filename, const QString url)
\begin{DoxyCompactList}\small\item\em Adds a \doxylink{struct_photo}{Photo} to the model, with just a name and a path (url). Other data should be filled later, from exif metadata. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_photo_model_a3cc8c0b5e6803970def517a8d57ae155}{fetch\+Exif\+Metadata}} (int row=-\/1)
\begin{DoxyCompactList}\small\item\em Ce slot lit des données EXIF d\textquotesingle{}une (ou toutes) photos du répertoire. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_photo_model_ac393e2839ea5993f199ec669973972ef}{save\+Metadata}} ()
\begin{DoxyCompactList}\small\item\em Ce slot écrit dans les fichiers JPG (de façon asynchrone) les metadonnées IPTC des photos qui ont été modifiées. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_photo_model_a3dc7e36064651fe29ab6685d8eed1dd6}{set\+Selected\+Item\+Coords}} (double latitude, double longitude)
\begin{DoxyCompactList}\small\item\em Affecte les coordonnées GPS fournies à la photo actuellement sélectionnée. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_photo_model_a834795331bc8b3f329e8f2a143839265}{set\+In\+Circle\+Item\+Coords}} (double latitude, double longitude)
\begin{DoxyCompactList}\small\item\em Ce slot affecte les coordonnées GPS fournies à toutes les photos géographiquement situées à l\textquotesingle{}interieur du cercle rouge. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_photo_model_a50dc093e369a2741b62aa03556df061c}{set\+Photo\+Property}} (const int photo, const QString value, const QString property)
\begin{DoxyCompactList}\small\item\em Ce slot affecte le role fourni à toutes les photos géographiquement situées à l\textquotesingle{}interieur du cercle rouge. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_photo_model_a8cd1ac5560f3897892474271c5206106}{find\+In\+Circle\+Photos}} (int circle\+\_\+radius)
\begin{DoxyCompactList}\small\item\em Parcourt toutes les \doxylink{struct_photo}{Photo} du modèle, et flague celles qui sont à l\textquotesingle{}interieur du cercle demandé. Fonction avec mécanisme de Mutuelle Exclusion (MUTEX). \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_photo_model_a536c2a2381b3ce827257068f5bf43933}{apply\+Creator\+To\+All}} ()
\begin{DoxyCompactList}\small\item\em Applique le "{}photographe"{} à toutes les photos du modèle. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_photo_model_a297fef9ba3dd5d7c1c00593cefaf144e}{append\+Saved\+Position}} (double latitude, double longitude)
\begin{DoxyCompactList}\small\item\em Ajoute une entrée spéciale dans le Modèle, correspondant à une position GPS mémorisée (marker jaune). \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_photo_model_a6c2e4a731969e952993dfe4d38e5788f}{remove\+Saved\+Position}} ()
\begin{DoxyCompactList}\small\item\em Supprime du modèle l\textquotesingle{}item correspondant à la position sauvegardée. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_photo_model_a5aef53c6395a6ccd579a019c62e472e0}{set\+Data}} (int row, QString value, QString property)
\begin{DoxyCompactList}\small\item\em Ce slot ajoute ou modifie une propriété d\textquotesingle{}une \doxylink{struct_photo}{Photo}, par exemple quand on clique sur une suggestion. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_photo_model_aacde479b741e9f94c2077ad979e6b6a7}{duplicate\+Data}} (int row)
\begin{DoxyCompactList}\small\item\em Duplicates an item of the model, and add it at the end of the vector. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_photo_model_a1e2f3f829e54ef445a5b1dea07ad2118}{remove\+Data}} (int row)
\begin{DoxyCompactList}\small\item\em Fonction typique qui supprime l\textquotesingle{}item désigné du modèle. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Signals}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{class_photo_model_ac6f14df5683cb7c053c9d5c6982a3d2c}\label{class_photo_model_ac6f14df5683cb7c053c9d5c6982a3d2c} 
void {\bfseries selected\+Row\+Changed} (const int row)
\begin{DoxyCompactList}\small\item\em Signal émis quand la \doxylink{struct_photo}{Photo} sélectionnée change. \end{DoxyCompactList}\item 
\Hypertarget{class_photo_model_ab8f7cb78c57128f6a6df184a4d89f2bf}\label{class_photo_model_ab8f7cb78c57128f6a6df184a4d89f2bf} 
void {\bfseries send\+Suggestion} (QString text, QString target, QString category, int row)
\begin{DoxyCompactList}\small\item\em Ce signal envoie une \doxylink{struct_suggestion}{Suggestion} au \doxylink{class_suggestion_model}{Suggestion\+Model}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
QHash$<$ int, QByte\+Array $>$ \mbox{\hyperlink{class_photo_model_aac3d5e1ae72e823b4e6091497c5cf27d}{role\+Names}} () const override
\item 
\mbox{\hyperlink{class_photo_model_a244f996eed49122ebe11c5369d63a0e2}{Photo\+Model}} (QObject \texorpdfstring{$\ast$}{*}parent=nullptr)
\begin{DoxyCompactList}\small\item\em Constructor. Just add the welcome item in the list. If the debug mode is active, a second item is added for testing purpose. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_photo_model_a0fdbd69a007a6bda5623cce8d5f3cd57}{row\+Count}} (const QModel\+Index \&parent) const override
\begin{DoxyCompactList}\small\item\em Returns the number of items in the model. \end{DoxyCompactList}\item 
QVariant \mbox{\hyperlink{class_photo_model_a3f09addf9a989e85b7ae5797156b270f}{data}} (const QModel\+Index \&index, int role=Qt\+::\+Display\+Role) const override
\begin{DoxyCompactList}\small\item\em Returns the role value of an element of the model. \end{DoxyCompactList}\item 
Q\+\_\+\+INVOKABLE QVariant \mbox{\hyperlink{class_photo_model_a1d2159990dbea68afefa28bfdd6804fe}{get\+Url}} (int row)
\begin{DoxyCompactList}\small\item\em Returns the full name of the photo. This is an example of unitary getter method. \end{DoxyCompactList}\item 
Q\+\_\+\+INVOKABLE QVariant\+Map \mbox{\hyperlink{class_photo_model_a18fb19d062f2f7d7d79585d2e62c9634}{get}} (int row)
\begin{DoxyCompactList}\small\item\em La methode \doxylink{class_photo_model_a18fb19d062f2f7d7d79585d2e62c9634}{get()} (invocable par QML) renvoie les données de la photo demandée. Usage dans QML\+: {\ttfamily titre = my\+Model.\+get(1).title;} \end{DoxyCompactList}\item 
Q\+\_\+\+INVOKABLE void \mbox{\hyperlink{class_photo_model_a822190ecc2081c7b49030c0f6a42317f}{dump\+Data}} ()
\begin{DoxyCompactList}\small\item\em Debug function that print (in the console) one line of the model at every call. \end{DoxyCompactList}\item 
Q\+\_\+\+INVOKABLE void \mbox{\hyperlink{class_photo_model_a1ff9f0f539d9b65e0521ebbaa498b21b}{clear}} ()
\begin{DoxyCompactList}\small\item\em Deletes all the items of the Model. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_photo_model_a28933cf9451c4794c12325ac125f439f}{append}} (const QVariant\+Map \mbox{\hyperlink{class_photo_model_a3f09addf9a989e85b7ae5797156b270f}{data}})
\begin{DoxyCompactList}\small\item\em Adds a \doxylink{struct_photo}{Photo} item to the model, from a list of metadata. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_photo_model_ad7a5d45624200d819ee0ab429387baa0}{set\+Data}} (const QModel\+Index \&index, const QVariant \&value, int role) override
\begin{DoxyCompactList}\small\item\em Surcharge qui permet de modifier {\bfseries{unitairement}} un Role d\textquotesingle{}un item du modèle. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_photo_model_a606c1207c36cdf5e81f346ca82cec2d8}{set\+Data}} (const QVariant\+Map \&value\+\_\+list)
\begin{DoxyCompactList}\small\item\em Cette méthode permet de modifier plusieurs roles d\textquotesingle{}un item du modèle, avec comme clef le role \textquotesingle{}Filename\+Role\textquotesingle{}. Elle est appelée lors de la lecture (ou relecture) globale des tags Exif des photos originales. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{class_photo_model_af32aed3a0a39738d782a1d69a14175f2}\label{class_photo_model_af32aed3a0a39738d782a1d69a14175f2} 
QModel\+Index {\bfseries m\+\_\+marker\+Index} = QModel\+Index()
\begin{DoxyCompactList}\small\item\em Index du marker Saved\+Position. Initialisé à une valeur invalide. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{class_photo_model_a6ff090266c5c666181a02469943d9512}\label{class_photo_model_a6ff090266c5c666181a02469943d9512} 
int {\bfseries m\+\_\+marker\+Row} = -\/1
\begin{DoxyCompactList}\small\item\em Position du marker Saved\+Position. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Properties}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{class_photo_model_a6376872cafff59ccc887f405a2515ed9}\label{class_photo_model_a6376872cafff59ccc887f405a2515ed9} 
int {\bfseries selected\+Row}
\begin{DoxyCompactList}\small\item\em selected\+Row is the \doxylink{struct_photo}{Photo} row in the model corresponding to the selected photo in the List\+View. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_photo_model_af43bef19e91b11bf4e79c55fe458d0a1}{add\+Test\+Item}} ()
\begin{DoxyCompactList}\small\item\em Adds a test item to the \doxylink{class_photo_model}{Photo\+Model}. (only if {\bfseries{Debug\+Mode}} is enabled in the \texorpdfstring{$\ast$}{*}\+Settingss) \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_photo_model_aee33ef1753815d48baa8d8ab8716782c}{selected\+Row}} (int row)
\begin{DoxyCompactList}\small\item\em Mémorise la position fournie. \end{DoxyCompactList}\item 
\Hypertarget{class_photo_model_ae3dd8e3599f33e699cd474c5fca7d0b2}\label{class_photo_model_ae3dd8e3599f33e699cd474c5fca7d0b2} 
int {\bfseries get\+Selected\+Row} ()
\begin{DoxyCompactList}\small\item\em Returns the last selected row. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_photo_model_aa63d16a07716d0ad5aff2ff1be183198}{belong}} (double p\+La, double p\+Lo, double o\+La, double o\+Lo, float r\+La, float r\+Lo)
\begin{DoxyCompactList}\small\item\em Indique si le point P de coordonnées (pX, pY) appartient au cercle de centre O (oX, oY) et de rayon R. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{class_photo_model_a6652f17b0436c7927b0924ddcd3ba98b}\label{class_photo_model_a6652f17b0436c7927b0924ddcd3ba98b} 
QVector$<$ \mbox{\hyperlink{struct_photo}{Photo}} $>$ {\bfseries m\+\_\+photos}
\begin{DoxyCompactList}\small\item\em La liste des \doxylink{struct_photo}{Photo} du modèle. \end{DoxyCompactList}\item 
\Hypertarget{class_photo_model_a08f7d839ea11f7c0190afa716ac5bb7a}\label{class_photo_model_a08f7d839ea11f7c0190afa716ac5bb7a} 
int {\bfseries m\+\_\+last\+Selected\+Row} = 0
\begin{DoxyCompactList}\small\item\em L\textquotesingle{}indice de la précédente photo sélectionnée. (initialisé à 0 car au départ, on a un item\+: le Welcome Rolleyflex) \end{DoxyCompactList}\item 
\Hypertarget{class_photo_model_a844160211f6ff9d747dcc59310d2fc22}\label{class_photo_model_a844160211f6ff9d747dcc59310d2fc22} 
int {\bfseries m\+\_\+dumped\+Row} = 0
\begin{DoxyCompactList}\small\item\em Compteur pour le dump de debug. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
The \doxylink{class_photo_model}{Photo\+Model} class manages a list of photo data. 

\textbackslash{}inmodule Ti\+Photo\+Locator 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{class_photo_model_a244f996eed49122ebe11c5369d63a0e2}\label{class_photo_model_a244f996eed49122ebe11c5369d63a0e2} 
\index{PhotoModel@{PhotoModel}!PhotoModel@{PhotoModel}}
\index{PhotoModel@{PhotoModel}!PhotoModel@{PhotoModel}}
\doxysubsubsection{\texorpdfstring{PhotoModel()}{PhotoModel()}}
{\footnotesize\ttfamily Photo\+Model\+::\+Photo\+Model (\begin{DoxyParamCaption}\item[{QObject \texorpdfstring{$\ast$}{*}}]{parent = {\ttfamily nullptr} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}



Constructor. Just add the welcome item in the list. If the debug mode is active, a second item is added for testing purpose. 


\begin{DoxyParams}{Parameters}
{\em parent} & \+: paramètre classique pour les QAbstract\+List\+Model. \\
\hline
\end{DoxyParams}


\doxysubsection{Member Function Documentation}
\Hypertarget{class_photo_model_af43bef19e91b11bf4e79c55fe458d0a1}\label{class_photo_model_af43bef19e91b11bf4e79c55fe458d0a1} 
\index{PhotoModel@{PhotoModel}!addTestItem@{addTestItem}}
\index{addTestItem@{addTestItem}!PhotoModel@{PhotoModel}}
\doxysubsubsection{\texorpdfstring{addTestItem()}{addTestItem()}}
{\footnotesize\ttfamily void Photo\+Model\+::add\+Test\+Item (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Adds a test item to the \doxylink{class_photo_model}{Photo\+Model}. (only if {\bfseries{Debug\+Mode}} is enabled in the \texorpdfstring{$\ast$}{*}\+Settingss) 

\begin{DoxyNote}{Note}
For testing purpose. 
\end{DoxyNote}
\Hypertarget{class_photo_model_a8a98d5f81789881189e179d6059c1586}\label{class_photo_model_a8a98d5f81789881189e179d6059c1586} 
\index{PhotoModel@{PhotoModel}!append@{append}}
\index{append@{append}!PhotoModel@{PhotoModel}}
\doxysubsubsection{\texorpdfstring{append}{append}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Photo\+Model\+::append (\begin{DoxyParamCaption}\item[{const QString}]{filename,  }\item[{const QString}]{url }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Adds a \doxylink{struct_photo}{Photo} to the model, with just a name and a path (url). Other data should be filled later, from exif metadata. 


\begin{DoxyParams}{Parameters}
{\em filename} & \+: filename of the photo \\
\hline
{\em url} & \+: full path of the photo (in Qt format) \\
\hline
\end{DoxyParams}
\Hypertarget{class_photo_model_a28933cf9451c4794c12325ac125f439f}\label{class_photo_model_a28933cf9451c4794c12325ac125f439f} 
\index{PhotoModel@{PhotoModel}!append@{append}}
\index{append@{append}!PhotoModel@{PhotoModel}}
\doxysubsubsection{\texorpdfstring{append()}{append()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Photo\+Model\+::append (\begin{DoxyParamCaption}\item[{const QVariant\+Map}]{data }\end{DoxyParamCaption})}



Adds a \doxylink{struct_photo}{Photo} item to the model, from a list of metadata. 


\begin{DoxyParams}{Parameters}
{\em data} & \+: a \textquotesingle{}key-\/value\textquotesingle{} dictionnary of metadata.\\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{QVariantMap\ map;}
\DoxyCodeLine{map.insert(\textcolor{stringliteral}{"{}filename"{}},\ QVariant(filename));}
\DoxyCodeLine{map.insert(\mbox{\hyperlink{class_photo_model_aac3d5e1ae72e823b4e6091497c5cf27d}{roleNames}}().value(ImageUrlRole),\ QVariant(url));}

\end{DoxyCode}
 \Hypertarget{class_photo_model_a297fef9ba3dd5d7c1c00593cefaf144e}\label{class_photo_model_a297fef9ba3dd5d7c1c00593cefaf144e} 
\index{PhotoModel@{PhotoModel}!appendSavedPosition@{appendSavedPosition}}
\index{appendSavedPosition@{appendSavedPosition}!PhotoModel@{PhotoModel}}
\doxysubsubsection{\texorpdfstring{appendSavedPosition}{appendSavedPosition}}
{\footnotesize\ttfamily void Photo\+Model\+::append\+Saved\+Position (\begin{DoxyParamCaption}\item[{double}]{latitude,  }\item[{double}]{longitude }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Ajoute une entrée spéciale dans le Modèle, correspondant à une position GPS mémorisée (marker jaune). 


\begin{DoxyParams}{Parameters}
{\em latitude} & \+: latitude au format GPS. \\
\hline
{\em longitude} & \+: longitude au format GPS. \\
\hline
\end{DoxyParams}
\Hypertarget{class_photo_model_a536c2a2381b3ce827257068f5bf43933}\label{class_photo_model_a536c2a2381b3ce827257068f5bf43933} 
\index{PhotoModel@{PhotoModel}!applyCreatorToAll@{applyCreatorToAll}}
\index{applyCreatorToAll@{applyCreatorToAll}!PhotoModel@{PhotoModel}}
\doxysubsubsection{\texorpdfstring{applyCreatorToAll}{applyCreatorToAll}}
{\footnotesize\ttfamily void Photo\+Model\+::apply\+Creator\+To\+All (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Applique le "{}photographe"{} à toutes les photos du modèle. 

Le nom du photographe est configuré dans les Settings. \Hypertarget{class_photo_model_aa63d16a07716d0ad5aff2ff1be183198}\label{class_photo_model_aa63d16a07716d0ad5aff2ff1be183198} 
\index{PhotoModel@{PhotoModel}!belong@{belong}}
\index{belong@{belong}!PhotoModel@{PhotoModel}}
\doxysubsubsection{\texorpdfstring{belong()}{belong()}}
{\footnotesize\ttfamily bool Photo\+Model\+::belong (\begin{DoxyParamCaption}\item[{double}]{p\+La,  }\item[{double}]{p\+Lo,  }\item[{double}]{o\+La,  }\item[{double}]{o\+Lo,  }\item[{float}]{r\+La,  }\item[{float}]{r\+Lo }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Indique si le point P de coordonnées (pX, pY) appartient au cercle de centre O (oX, oY) et de rayon R. 


\begin{DoxyParams}{Parameters}
{\em p\+La} & \+: Latitude du point à tester. \\
\hline
{\em p\+Lo} & \+: Longitude du point à tester. \\
\hline
{\em o\+La} & \+: Latitude de l\textquotesingle{}origine du cercle. \\
\hline
{\em o\+Lo} & \+: Longitude de l\textquotesingle{}origine du cercle. \\
\hline
{\em r\+La} & \+: le rayon du cercle sur l\textquotesingle{}axe des Latitudes N-\/S(en degrés). \\
\hline
{\em r\+Lo} & \+: le rayon du cercle sur l\textquotesingle{}axe des Longitudes E-\/W (en degrés). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true si le point est dans le cercle. 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
Pour être le plus rapide possible, le cercle est plutôt un carré. 
\end{DoxyNote}
\Hypertarget{class_photo_model_a1ff9f0f539d9b65e0521ebbaa498b21b}\label{class_photo_model_a1ff9f0f539d9b65e0521ebbaa498b21b} 
\index{PhotoModel@{PhotoModel}!clear@{clear}}
\index{clear@{clear}!PhotoModel@{PhotoModel}}
\doxysubsubsection{\texorpdfstring{clear()}{clear()}}
{\footnotesize\ttfamily void Photo\+Model\+::clear (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Deletes all the items of the Model. 

On utilise cette fonction quand on scanne un nouveau répertoire de photos. \Hypertarget{class_photo_model_a3f09addf9a989e85b7ae5797156b270f}\label{class_photo_model_a3f09addf9a989e85b7ae5797156b270f} 
\index{PhotoModel@{PhotoModel}!data@{data}}
\index{data@{data}!PhotoModel@{PhotoModel}}
\doxysubsubsection{\texorpdfstring{data()}{data()}}
{\footnotesize\ttfamily QVariant Photo\+Model\+::data (\begin{DoxyParamCaption}\item[{const QModel\+Index \&}]{index,  }\item[{int}]{role = {\ttfamily Qt\+:\+:DisplayRole} }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}}



Returns the role value of an element of the model. 

\begin{DoxyNote}{Note}
Implémentation obligatoire. 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em index} & \+: index of the element of the model. \\
\hline
{\em role} & \+: the requested role (enum). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the requested role value 
\end{DoxyReturn}
\Hypertarget{class_photo_model_a822190ecc2081c7b49030c0f6a42317f}\label{class_photo_model_a822190ecc2081c7b49030c0f6a42317f} 
\index{PhotoModel@{PhotoModel}!dumpData@{dumpData}}
\index{dumpData@{dumpData}!PhotoModel@{PhotoModel}}
\doxysubsubsection{\texorpdfstring{dumpData()}{dumpData()}}
{\footnotesize\ttfamily void Photo\+Model\+::dump\+Data (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Debug function that print (in the console) one line of the model at every call. 

\begin{DoxyNote}{Note}
Debug function. 
\end{DoxyNote}
\Hypertarget{class_photo_model_aacde479b741e9f94c2077ad979e6b6a7}\label{class_photo_model_aacde479b741e9f94c2077ad979e6b6a7} 
\index{PhotoModel@{PhotoModel}!duplicateData@{duplicateData}}
\index{duplicateData@{duplicateData}!PhotoModel@{PhotoModel}}
\doxysubsubsection{\texorpdfstring{duplicateData}{duplicateData}}
{\footnotesize\ttfamily void Photo\+Model\+::duplicate\+Data (\begin{DoxyParamCaption}\item[{int}]{row }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Duplicates an item of the model, and add it at the end of the vector. 


\begin{DoxyParams}{Parameters}
{\em row} & \+: item row to be duplicated. \\
\hline
\end{DoxyParams}
\Hypertarget{class_photo_model_a3cc8c0b5e6803970def517a8d57ae155}\label{class_photo_model_a3cc8c0b5e6803970def517a8d57ae155} 
\index{PhotoModel@{PhotoModel}!fetchExifMetadata@{fetchExifMetadata}}
\index{fetchExifMetadata@{fetchExifMetadata}!PhotoModel@{PhotoModel}}
\doxysubsubsection{\texorpdfstring{fetchExifMetadata}{fetchExifMetadata}}
{\footnotesize\ttfamily void Photo\+Model\+::fetch\+Exif\+Metadata (\begin{DoxyParamCaption}\item[{int}]{photo = {\ttfamily -\/1} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Ce slot lit des données EXIF d\textquotesingle{}une (ou toutes) photos du répertoire. 


\begin{DoxyParams}{Parameters}
{\em photo} & \+: l\textquotesingle{}indice de la photo (vide ou -\/1 = toutes les photos du répertoire) \\
\hline
\end{DoxyParams}
\Hypertarget{class_photo_model_a8cd1ac5560f3897892474271c5206106}\label{class_photo_model_a8cd1ac5560f3897892474271c5206106} 
\index{PhotoModel@{PhotoModel}!findInCirclePhotos@{findInCirclePhotos}}
\index{findInCirclePhotos@{findInCirclePhotos}!PhotoModel@{PhotoModel}}
\doxysubsubsection{\texorpdfstring{findInCirclePhotos}{findInCirclePhotos}}
{\footnotesize\ttfamily void Photo\+Model\+::find\+In\+Circle\+Photos (\begin{DoxyParamCaption}\item[{int}]{circle\+\_\+radius }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Parcourt toutes les \doxylink{struct_photo}{Photo} du modèle, et flague celles qui sont à l\textquotesingle{}interieur du cercle demandé. Fonction avec mécanisme de Mutuelle Exclusion (MUTEX). 


\begin{DoxyParams}{Parameters}
{\em circle\+\_\+radius} & Le rayon du cercle (en mètres).\\
\hline
\end{DoxyParams}
On utilise les conversions\+: {\bfseries{1°lat = 111km}} et {\bfseries{1°long = 111km x cos(lat)}}. \Hypertarget{class_photo_model_a18fb19d062f2f7d7d79585d2e62c9634}\label{class_photo_model_a18fb19d062f2f7d7d79585d2e62c9634} 
\index{PhotoModel@{PhotoModel}!get@{get}}
\index{get@{get}!PhotoModel@{PhotoModel}}
\doxysubsubsection{\texorpdfstring{get()}{get()}}
{\footnotesize\ttfamily QVariant\+Map Photo\+Model\+::get (\begin{DoxyParamCaption}\item[{int}]{row }\end{DoxyParamCaption})}



La methode \doxylink{class_photo_model_a18fb19d062f2f7d7d79585d2e62c9634}{get()} (invocable par QML) renvoie les données de la photo demandée. Usage dans QML\+: {\ttfamily titre = my\+Model.\+get(1).title;} 


\begin{DoxyParams}{Parameters}
{\em row} & \+: indice. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
une Map contenant toutes les propriétés de l\textquotesingle{}item, dont la propriété spéciale\+: "{}row"{}. 
\end{DoxyReturn}
\Hypertarget{class_photo_model_a1d2159990dbea68afefa28bfdd6804fe}\label{class_photo_model_a1d2159990dbea68afefa28bfdd6804fe} 
\index{PhotoModel@{PhotoModel}!getUrl@{getUrl}}
\index{getUrl@{getUrl}!PhotoModel@{PhotoModel}}
\doxysubsubsection{\texorpdfstring{getUrl()}{getUrl()}}
{\footnotesize\ttfamily QVariant Photo\+Model\+::get\+Url (\begin{DoxyParamCaption}\item[{int}]{row }\end{DoxyParamCaption})}



Returns the full name of the photo. This is an example of unitary getter method. 


\begin{DoxyParams}{Parameters}
{\em row} & \+: Indice de l\textquotesingle{}élément à lire. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a QVariant containing the absolute path and full name (image URL) of the photo. 
\end{DoxyReturn}
\Hypertarget{class_photo_model_a1e2f3f829e54ef445a5b1dea07ad2118}\label{class_photo_model_a1e2f3f829e54ef445a5b1dea07ad2118} 
\index{PhotoModel@{PhotoModel}!removeData@{removeData}}
\index{removeData@{removeData}!PhotoModel@{PhotoModel}}
\doxysubsubsection{\texorpdfstring{removeData}{removeData}}
{\footnotesize\ttfamily void Photo\+Model\+::remove\+Data (\begin{DoxyParamCaption}\item[{int}]{row }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Fonction typique qui supprime l\textquotesingle{}item désigné du modèle. 


\begin{DoxyParams}{Parameters}
{\em row} & \+: la position dans le vecteur de l\textquotesingle{}item à supprimer. \\
\hline
\end{DoxyParams}
\Hypertarget{class_photo_model_a6c2e4a731969e952993dfe4d38e5788f}\label{class_photo_model_a6c2e4a731969e952993dfe4d38e5788f} 
\index{PhotoModel@{PhotoModel}!removeSavedPosition@{removeSavedPosition}}
\index{removeSavedPosition@{removeSavedPosition}!PhotoModel@{PhotoModel}}
\doxysubsubsection{\texorpdfstring{removeSavedPosition}{removeSavedPosition}}
{\footnotesize\ttfamily void Photo\+Model\+::remove\+Saved\+Position (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Supprime du modèle l\textquotesingle{}item correspondant à la position sauvegardée. 

L\textquotesingle{}item {\bfseries{Saved\+Position}}, de type {\bfseries{is\+Marker}} est supprimé du modèle. \Hypertarget{class_photo_model_aac3d5e1ae72e823b4e6091497c5cf27d}\label{class_photo_model_aac3d5e1ae72e823b4e6091497c5cf27d} 
\index{PhotoModel@{PhotoModel}!roleNames@{roleNames}}
\index{roleNames@{roleNames}!PhotoModel@{PhotoModel}}
\doxysubsubsection{\texorpdfstring{roleNames()}{roleNames()}}
{\footnotesize\ttfamily QHash$<$ int, QByte\+Array $>$ Photo\+Model\+::role\+Names (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}}

Table of Role names. C\textquotesingle{}est la correspondance entre le role C++ et le nom de la property dans QML. \begin{DoxyNote}{Note}
Implémentation obligatoire. 

Un appel à {\ttfamily \doxylink{class_photo_model_aac3d5e1ae72e823b4e6091497c5cf27d}{role\+Names()}.value(role);} renvoie la property (string) correspondant au role demandé. 

Un appel à {\ttfamily \doxylink{class_photo_model_aac3d5e1ae72e823b4e6091497c5cf27d}{role\+Names()}.key(property.\+to\+Utf8());} renvoie le role (int) correspondant à la property demandée. 
\end{DoxyNote}
\Hypertarget{class_photo_model_a0fdbd69a007a6bda5623cce8d5f3cd57}\label{class_photo_model_a0fdbd69a007a6bda5623cce8d5f3cd57} 
\index{PhotoModel@{PhotoModel}!rowCount@{rowCount}}
\index{rowCount@{rowCount}!PhotoModel@{PhotoModel}}
\doxysubsubsection{\texorpdfstring{rowCount()}{rowCount()}}
{\footnotesize\ttfamily int Photo\+Model\+::row\+Count (\begin{DoxyParamCaption}\item[{const QModel\+Index \&}]{parent }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}}



Returns the number of items in the model. 

\begin{DoxyNote}{Note}
Implémentation obligatoire. 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em parent} & \+: parent of the model. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the number of elements in the model. 
\end{DoxyReturn}
\Hypertarget{class_photo_model_ac393e2839ea5993f199ec669973972ef}\label{class_photo_model_ac393e2839ea5993f199ec669973972ef} 
\index{PhotoModel@{PhotoModel}!saveMetadata@{saveMetadata}}
\index{saveMetadata@{saveMetadata}!PhotoModel@{PhotoModel}}
\doxysubsubsection{\texorpdfstring{saveMetadata}{saveMetadata}}
{\footnotesize\ttfamily void Photo\+Model\+::save\+Metadata (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Ce slot écrit dans les fichiers JPG (de façon asynchrone) les metadonnées IPTC des photos qui ont été modifiées. 

\begin{DoxyNote}{Note}
Tag obligatoire\+: {\ttfamily image\+Url}. 

Tags modifiés\+: {\ttfamily GPS coords, Creator, City, Country, Date\+Time\+Original}. 

Tags automatiques\+: {\ttfamily GPS Ref, Metadata\+Editing\+Software}. 
\end{DoxyNote}
\Hypertarget{class_photo_model_aee33ef1753815d48baa8d8ab8716782c}\label{class_photo_model_aee33ef1753815d48baa8d8ab8716782c} 
\index{PhotoModel@{PhotoModel}!selectedRow@{selectedRow}}
\index{selectedRow@{selectedRow}!PhotoModel@{PhotoModel}}
\doxysubsubsection{\texorpdfstring{selectedRow()}{selectedRow()}}
{\footnotesize\ttfamily void Photo\+Model\+::selected\+Row (\begin{DoxyParamCaption}\item[{int}]{row }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Mémorise la position fournie. 

Met le flag {\bfseries{is\+Selected}} du précédent item à {\itshape False} et le nouveau à {\itshape True}. ~\newline
 Met aussi le flag {\bfseries{inside\+Circle}} du précédent item à {\itshape False} et le nouveau à {\itshape True}. 
\begin{DoxyParams}{Parameters}
{\em row} & \+: l\textquotesingle{}indice de l\textquotesingle{}item sélectionné dans la List\+View. \\
\hline
\end{DoxyParams}
\Hypertarget{class_photo_model_ad7a5d45624200d819ee0ab429387baa0}\label{class_photo_model_ad7a5d45624200d819ee0ab429387baa0} 
\index{PhotoModel@{PhotoModel}!setData@{setData}}
\index{setData@{setData}!PhotoModel@{PhotoModel}}
\doxysubsubsection{\texorpdfstring{setData()}{setData()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily bool Photo\+Model\+::set\+Data (\begin{DoxyParamCaption}\item[{const QModel\+Index \&}]{index,  }\item[{const QVariant \&}]{value,  }\item[{int}]{role }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}



Surcharge qui permet de modifier {\bfseries{unitairement}} un Role d\textquotesingle{}un item du modèle. 

Cette fonction met aussi à {\itshape True} le flag {\bfseries{To Be Saved}} car il s\textquotesingle{}agit d\textquotesingle{}une action opérateur. Cette fonction est appelée quand on clique sur un Chips, pour modifier une des propriétés de la \doxylink{struct_photo}{Photo}. Certains roles ne sont pas modifiables\+: {\ttfamily image\+Url, is\+Selected, has\+GPS, filename, shutter\+Speed, F-\/number}, etc. \begin{DoxySeeAlso}{See also}
\href{https://doc.qt.io/qt-5/qtquick-modelviewsdata-cppmodels.html\#qabstractitemmodel-subclass}{\texttt{ https\+://doc.\+qt.\+io/qt-\/5/qtquick-\/modelviewsdata-\/cppmodels.\+html\#qabstractitemmodel-\/subclass}} 
\end{DoxySeeAlso}
\begin{DoxyNote}{Note}
\+: It is important to emit the {\ttfamily data\+Changed()} signal after saving the changes.
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em index} & \+: l\textquotesingle{}index (au sens QModel\+Index) de l\textquotesingle{}item à modifier. \\
\hline
{\em value} & \+: la nouvelle valeur. \\
\hline
{\em role} & \+: le Role à modifier ({\ttfamily Latitude\+Role, Longitude\+Role, To\+Be\+Saved\+Role, city, country}). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\itshape true} si la modification a réussi. {\itshape False} si l\textquotesingle{}index n\textquotesingle{}est pas valide, ou si la nouvelle valeur est identique à l\textquotesingle{}existante. 
\end{DoxyReturn}
\Hypertarget{class_photo_model_a606c1207c36cdf5e81f346ca82cec2d8}\label{class_photo_model_a606c1207c36cdf5e81f346ca82cec2d8} 
\index{PhotoModel@{PhotoModel}!setData@{setData}}
\index{setData@{setData}!PhotoModel@{PhotoModel}}
\doxysubsubsection{\texorpdfstring{setData()}{setData()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily void Photo\+Model\+::set\+Data (\begin{DoxyParamCaption}\item[{const QVariant\+Map \&}]{value\+\_\+list }\end{DoxyParamCaption})}



Cette méthode permet de modifier plusieurs roles d\textquotesingle{}un item du modèle, avec comme clef le role \textquotesingle{}Filename\+Role\textquotesingle{}. Elle est appelée lors de la lecture (ou relecture) globale des tags Exif des photos originales. 

Roles non modifiables (ignorés)\+: {\ttfamily image\+Url, inside\+Circle}. Roles non modifiables (recalculés)\+: {\ttfamily has\+GPS, to\+Be\+Saved}. Cette fonction positionne le flag {\bfseries{To\+Be\+Saved}} à {\itshape False}. 
\begin{DoxyParams}{Parameters}
{\em value\+\_\+list} & \+: la liste des données à modifier. Attention\+: les Keys sont les noms des balises EXIF. {\ttfamily File\+Name} est obligatoire. \\
\hline
\end{DoxyParams}
\Hypertarget{class_photo_model_a5aef53c6395a6ccd579a019c62e472e0}\label{class_photo_model_a5aef53c6395a6ccd579a019c62e472e0} 
\index{PhotoModel@{PhotoModel}!setData@{setData}}
\index{setData@{setData}!PhotoModel@{PhotoModel}}
\doxysubsubsection{\texorpdfstring{setData}{setData}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily void Photo\+Model\+::set\+Data (\begin{DoxyParamCaption}\item[{int}]{row,  }\item[{QString}]{value,  }\item[{QString}]{property }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Ce slot ajoute ou modifie une propriété d\textquotesingle{}une \doxylink{struct_photo}{Photo}, par exemple quand on clique sur une suggestion. 


\begin{DoxyParams}{Parameters}
{\em row} & \+: indice de la photo. \\
\hline
{\em value} & \+: valeur de la propriété. \\
\hline
{\em property} & \+: nom de la propriété. \\
\hline
\end{DoxyParams}
\Hypertarget{class_photo_model_a834795331bc8b3f329e8f2a143839265}\label{class_photo_model_a834795331bc8b3f329e8f2a143839265} 
\index{PhotoModel@{PhotoModel}!setInCircleItemCoords@{setInCircleItemCoords}}
\index{setInCircleItemCoords@{setInCircleItemCoords}!PhotoModel@{PhotoModel}}
\doxysubsubsection{\texorpdfstring{setInCircleItemCoords}{setInCircleItemCoords}}
{\footnotesize\ttfamily void Photo\+Model\+::set\+In\+Circle\+Item\+Coords (\begin{DoxyParamCaption}\item[{double}]{latitude,  }\item[{double}]{longitude }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Ce slot affecte les coordonnées GPS fournies à toutes les photos géographiquement situées à l\textquotesingle{}interieur du cercle rouge. 


\begin{DoxyParams}{Parameters}
{\em latitude} & \+: Latitude GPS à affecter aux photos \\
\hline
{\em longitude} & \+: Longitude GPS à affecter aux photos \\
\hline
\end{DoxyParams}
\Hypertarget{class_photo_model_a50dc093e369a2741b62aa03556df061c}\label{class_photo_model_a50dc093e369a2741b62aa03556df061c} 
\index{PhotoModel@{PhotoModel}!setPhotoProperty@{setPhotoProperty}}
\index{setPhotoProperty@{setPhotoProperty}!PhotoModel@{PhotoModel}}
\doxysubsubsection{\texorpdfstring{setPhotoProperty}{setPhotoProperty}}
{\footnotesize\ttfamily void Photo\+Model\+::set\+Photo\+Property (\begin{DoxyParamCaption}\item[{const int}]{photo,  }\item[{const QString}]{value,  }\item[{const QString}]{property }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Ce slot affecte le role fourni à toutes les photos géographiquement situées à l\textquotesingle{}interieur du cercle rouge. 


\begin{DoxyParams}{Parameters}
{\em photo} & \+: l\textquotesingle{}indice de la \doxylink{struct_photo}{Photo} à modifier. Voir la note pour les valeurs particulières. \\
\hline
{\em value} & \+: la valeur \\
\hline
{\em property} & \+: le nom de la property correspondant au Role \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
Valeurs particulières\+: \begin{DoxyItemize}
\item La valeur spéciale -\/1 signifie {\bfseries{toutes les photos}}. \item La valeur spéciale -\/2 signifie {\bfseries{la photo sélectionée}}. \item La valeur spéciale -\/3 signifie {\bfseries{les photos du cercle}}. \end{DoxyItemize}

\end{DoxyNote}
\Hypertarget{class_photo_model_a3dc7e36064651fe29ab6685d8eed1dd6}\label{class_photo_model_a3dc7e36064651fe29ab6685d8eed1dd6} 
\index{PhotoModel@{PhotoModel}!setSelectedItemCoords@{setSelectedItemCoords}}
\index{setSelectedItemCoords@{setSelectedItemCoords}!PhotoModel@{PhotoModel}}
\doxysubsubsection{\texorpdfstring{setSelectedItemCoords}{setSelectedItemCoords}}
{\footnotesize\ttfamily void Photo\+Model\+::set\+Selected\+Item\+Coords (\begin{DoxyParamCaption}\item[{double}]{latitude,  }\item[{double}]{longitude }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Affecte les coordonnées GPS fournies à la photo actuellement sélectionnée. 


\begin{DoxyParams}{Parameters}
{\em latitude} & \+: Latitude GPS à affecter. \\
\hline
{\em longitude} & \+: Longitude GPS à affecter. \\
\hline
\end{DoxyParams}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
Models/Photo\+Model.\+h\item 
Models/Photo\+Model.\+cpp\end{DoxyCompactItemize}

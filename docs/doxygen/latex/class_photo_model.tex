\doxysection{Référence de la classe Photo\+Model}
\label{class_photo_model}\index{PhotoModel@{PhotoModel}}


The \doxyref{Photo\+Model}{p.}{class_photo_model} class manages a list of photo data.  




{\ttfamily \#include $<$Photo\+Model.\+h$>$}

Graphe d\textquotesingle{}héritage de Photo\+Model\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_photo_model}
\end{center}
\end{figure}
\doxysubsubsection*{Types publics}
\begin{DoxyCompactItemize}
\item 
\label{class_photo_model_afae44c634ae6bf2b6b6c2e2a19269159} 
enum \textbf{ Roles} \{ \newline
{\bfseries Filename\+Role} = Qt\+::User\+Role
, {\bfseries Image\+Url\+Role}
, {\bfseries Latitude\+Role}
, {\bfseries Longitude\+Role}
, \newline
{\bfseries Has\+GPSRole}
, {\bfseries Is\+Selected\+Role}
, {\bfseries Is\+Marker\+Role}
, {\bfseries Is\+Welcome\+Role}
, \newline
{\bfseries Inside\+Circle\+Role}
, {\bfseries To\+Be\+Saved\+Role}
, {\bfseries Date\+Time\+Original\+Role}
, {\bfseries Cam\+Model\+Role}
, \newline
{\bfseries Make\+Role}
, {\bfseries Image\+Width\+Role}
, {\bfseries Image\+Height\+Role}
, {\bfseries Orientation\+Role}
, \newline
{\bfseries Shutter\+Speed\+Role}
, {\bfseries FNumber\+Role}
, {\bfseries Creator\+Role}
, {\bfseries City\+Role}
, \newline
{\bfseries Country\+Role}
, {\bfseries Location\+Role}
, {\bfseries Description\+Role}
, {\bfseries Caption\+Writer\+Role}
, \newline
{\bfseries Software\+Role}
, {\bfseries Keywords\+Role}
 \}
\begin{DoxyCompactList}\small\item\em The Roles enum lists the roles associated to each attribute of a \doxyref{Photo}{p.}{struct_photo}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Connecteurs publics}
\begin{DoxyCompactItemize}
\item 
void \textbf{ append} (const QString filename, const QString url)
\begin{DoxyCompactList}\small\item\em Adds a \doxyref{Photo}{p.}{struct_photo} to the model, with just a name and a path (url). Other data should be filled later, from exif metadata. \end{DoxyCompactList}\item 
void \textbf{ fetch\+Exif\+Metadata} (int row=-\/1)
\begin{DoxyCompactList}\small\item\em Ce slot lit des données EXIF d\textquotesingle{}une (ou toutes) photos du répertoire. \end{DoxyCompactList}\item 
void \textbf{ save\+Metadata} ()
\begin{DoxyCompactList}\small\item\em Ce slot écrit dans les fichiers JPG (de façon asynchrone) les metadonnées IPTC des photos qui ont été modifiées. \end{DoxyCompactList}\item 
void \textbf{ set\+Selected\+Item\+Coords} (const double latitude, const double longitude)
\begin{DoxyCompactList}\small\item\em Affecte les coordonnées GPS fournies à la photo actuellement sélectionnée. \end{DoxyCompactList}\item 
void \textbf{ set\+In\+Circle\+Item\+Coords} (const double latitude, const double longitude)
\begin{DoxyCompactList}\small\item\em Ce slot affecte les coordonnées GPS fournies à toutes les photos géographiquement situées à l\textquotesingle{}interieur du cercle rouge. \end{DoxyCompactList}\item 
void \textbf{ set\+Photo\+Property} (const int photo, const QString value, const QString property)
\begin{DoxyCompactList}\small\item\em Ce slot affecte le role fourni à toutes les photos géographiquement situées à l\textquotesingle{}interieur du cercle rouge. \end{DoxyCompactList}\item 
void \textbf{ apply\+Creator\+To\+All} ()
\begin{DoxyCompactList}\small\item\em Applique le "{}photographe"{} à toutes les photos du modèle. \end{DoxyCompactList}\item 
void \textbf{ append\+Saved\+Position} (double latitude, double longitude)
\begin{DoxyCompactList}\small\item\em Ajoute une entrée spéciale dans le Modèle, correspondant à une position GPS mémorisée (marker jaune). \end{DoxyCompactList}\item 
void \textbf{ remove\+Saved\+Position} ()
\begin{DoxyCompactList}\small\item\em Supprime du modèle l\textquotesingle{}item correspondant à la position sauvegardée. \end{DoxyCompactList}\item 
void \textbf{ set\+Data} (int row, QString value, QString property)
\begin{DoxyCompactList}\small\item\em Ce slot ajoute ou modifie une propriété d\textquotesingle{}une \doxyref{Photo}{p.}{struct_photo}, par exemple quand on clique sur une suggestion. \end{DoxyCompactList}\item 
void \textbf{ duplicate\+Data} (int row)
\begin{DoxyCompactList}\small\item\em Duplicates an item of the model, and add it at the end of the vector. \end{DoxyCompactList}\item 
void \textbf{ remove\+Data} (int row)
\begin{DoxyCompactList}\small\item\em Fonction typique qui supprime l\textquotesingle{}item désigné du modèle. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Signaux}
\begin{DoxyCompactItemize}
\item 
\label{class_photo_model_ac6f14df5683cb7c053c9d5c6982a3d2c} 
void {\bfseries selected\+Row\+Changed} (const int row)
\begin{DoxyCompactList}\small\item\em Signal émis quand la \doxyref{Photo}{p.}{struct_photo} sélectionnée change. \end{DoxyCompactList}\item 
\label{class_photo_model_ab8f7cb78c57128f6a6df184a4d89f2bf} 
void {\bfseries send\+Suggestion} (QString text, QString target, QString category, int row)
\begin{DoxyCompactList}\small\item\em Ce signal envoie une \doxyref{Suggestion}{p.}{struct_suggestion} au \doxyref{Suggestion\+Model}{p.}{class_suggestion_model}. \end{DoxyCompactList}\item 
\label{class_photo_model_abdede59b31ccb60a9c2d3ad0838661c3} 
void {\bfseries data\+Cleared} ()
\begin{DoxyCompactList}\small\item\em Signal émis quand le modèle a été vidé. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Fonctions membres publiques}
\begin{DoxyCompactItemize}
\item 
\textbf{ Photo\+Model} (QObject $\ast$parent=nullptr)
\begin{DoxyCompactList}\small\item\em Constructor. Just add the welcome item in the list. If the debug mode is active, a second item is added for testing purpose. \end{DoxyCompactList}\item 
int \textbf{ row\+Count} (const QModel\+Index \&parent) const override
\begin{DoxyCompactList}\small\item\em Returns the number of items in the model. \end{DoxyCompactList}\item 
QVariant \textbf{ data} (const QModel\+Index \&index, int role=Qt\+::\+Display\+Role) const override
\begin{DoxyCompactList}\small\item\em Returns the role value of an element of the model. \end{DoxyCompactList}\item 
\label{class_photo_model_a1304d28519eb274764ef65afffec6c96} 
Qt\+::\+Item\+Flags {\bfseries flags} (const QModel\+Index \&index) const override
\item 
QHash$<$ int, QByte\+Array $>$ \textbf{ role\+Names} () const override
\item 
Q\+\_\+\+INVOKABLE QString \textbf{ get\+Role\+Name} (int role)
\begin{DoxyCompactList}\small\item\em Retourne le nom du role dans le modèle. \end{DoxyCompactList}\item 
Q\+\_\+\+INVOKABLE QVariant \textbf{ get\+Url} (int row)
\begin{DoxyCompactList}\small\item\em Returns the full name of the photo. This is an example of unitary getter method. \end{DoxyCompactList}\item 
Q\+\_\+\+INVOKABLE QVariant\+Map \textbf{ get} (int row)
\begin{DoxyCompactList}\small\item\em La methode \doxyref{get()}{p.}{class_photo_model_a18fb19d062f2f7d7d79585d2e62c9634} (invocable par QML) renvoie les données de la photo demandée. Usage dans QML\+: {\ttfamily titre = my\+Model.\+get(1).title;} \end{DoxyCompactList}\item 
Q\+\_\+\+INVOKABLE void \textbf{ dump\+Data} ()
\begin{DoxyCompactList}\small\item\em Debug function that print (in the console) one line of the model at every call. \end{DoxyCompactList}\item 
Q\+\_\+\+INVOKABLE void \textbf{ clear} ()
\begin{DoxyCompactList}\small\item\em Deletes all the items of the Model. \end{DoxyCompactList}\item 
Q\+\_\+\+INVOKABLE void \textbf{ remove\+Photo\+Keyword} (QString keyword)
\begin{DoxyCompactList}\small\item\em Enlève un des mots-\/clef descriptif de la photo. \end{DoxyCompactList}\item 
Q\+\_\+\+INVOKABLE void \textbf{ update\+Photo\+Keyword} (QString keyword, int index)
\begin{DoxyCompactList}\small\item\em Modifie un des mots-\/clef descriptif de la photo. \end{DoxyCompactList}\item 
Q\+\_\+\+INVOKABLE void \textbf{ find\+In\+Circle\+Photos} (int circle\+\_\+radius)
\begin{DoxyCompactList}\small\item\em Parcourt toutes les \doxyref{Photo}{p.}{struct_photo} du modèle, et flague celles qui sont à l\textquotesingle{}interieur du cercle demandé. Fonction avec mécanisme de Mutuelle Exclusion (MUTEX). \end{DoxyCompactList}\item 
void \textbf{ append} (const QVariant\+Map \textbf{ data})
\begin{DoxyCompactList}\small\item\em Adds a \doxyref{Photo}{p.}{struct_photo} item to the model, from a list of metadata. \end{DoxyCompactList}\item 
bool \textbf{ set\+Data} (const QModel\+Index \&index, const QVariant \&value, int role) override
\begin{DoxyCompactList}\small\item\em Surcharge qui permet de modifier {\bfseries{unitairement}} un Role d\textquotesingle{}un item du modèle. \end{DoxyCompactList}\item 
void \textbf{ set\+Data} (const QVariant\+Map \&value\+\_\+list)
\begin{DoxyCompactList}\small\item\em Cette méthode permet de modifier plusieurs roles d\textquotesingle{}un item du modèle, avec comme clef le role {\bfseries{Filename\+Role}}. Elle est appelée lors de la lecture (ou relecture) globale des tags Exif des photos originales. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Attributs publics}
\begin{DoxyCompactItemize}
\item 
\label{class_photo_model_af32aed3a0a39738d782a1d69a14175f2} 
QModel\+Index {\bfseries m\+\_\+marker\+Index} = QModel\+Index()
\begin{DoxyCompactList}\small\item\em Index du marker Saved\+Position. Initialisé à une valeur invalide. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Attributs protégés}
\begin{DoxyCompactItemize}
\item 
\label{class_photo_model_a6ff090266c5c666181a02469943d9512} 
int {\bfseries m\+\_\+marker\+Row} = -\/1
\begin{DoxyCompactList}\small\item\em Position du marker Saved\+Position. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Propriétés}
\begin{DoxyCompactItemize}
\item 
\label{class_photo_model_a6376872cafff59ccc887f405a2515ed9} 
int {\bfseries selected\+Row}
\begin{DoxyCompactList}\small\item\em selected\+Row is the \doxyref{Photo}{p.}{struct_photo} row in the model corresponding to the selected photo in the List\+View. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Fonctions membres privées}
\begin{DoxyCompactItemize}
\item 
void \textbf{ add\+Test\+Item} ()
\begin{DoxyCompactList}\small\item\em Adds a test item to the \doxyref{Photo\+Model}{p.}{class_photo_model}. (only if {\bfseries{Debug\+Mode}} is enabled in the $\ast$\+Settingss) \end{DoxyCompactList}\item 
void \textbf{ selected\+Row} (const int row)
\begin{DoxyCompactList}\small\item\em Mémorise la photo indiquée comme étant la photo sélectionnée dans la List\+View. \end{DoxyCompactList}\item 
\label{class_photo_model_ae3dd8e3599f33e699cd474c5fca7d0b2} 
int {\bfseries get\+Selected\+Row} ()
\begin{DoxyCompactList}\small\item\em Returns the last selected row. \end{DoxyCompactList}\item 
\label{class_photo_model_a8b4c0daf563670d61c87102a19bead12} 
void {\bfseries reset\+Circle} ()
\begin{DoxyCompactList}\small\item\em Enleve le flag "{}inside\+Circle"{} à toutes les photos. \end{DoxyCompactList}\item 
bool \textbf{ belong} (double p\+La, double p\+Lo, double o\+La, double o\+Lo, float r\+La, float r\+Lo)
\begin{DoxyCompactList}\small\item\em Indique si le point P de coordonnées (pX, pY) appartient au cercle de centre O (oX, oY) et de rayon R. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Attributs privés}
\begin{DoxyCompactItemize}
\item 
\label{class_photo_model_a6652f17b0436c7927b0924ddcd3ba98b} 
QVector$<$ \textbf{ Photo} $>$ {\bfseries m\+\_\+photos}
\begin{DoxyCompactList}\small\item\em La liste des \doxyref{Photo}{p.}{struct_photo} du modèle. \end{DoxyCompactList}\item 
\label{class_photo_model_a08f7d839ea11f7c0190afa716ac5bb7a} 
int {\bfseries m\+\_\+last\+Selected\+Row} = 0
\begin{DoxyCompactList}\small\item\em L\textquotesingle{}indice de la précédente photo sélectionnée. (initialisé à 0 car au départ, on a un item\+: le Welcome Rolleyflex) \end{DoxyCompactList}\item 
\label{class_photo_model_a844160211f6ff9d747dcc59310d2fc22} 
int {\bfseries m\+\_\+dumped\+Row} = 0
\begin{DoxyCompactList}\small\item\em Compteur pour le dump de debug. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Description détaillée}
The \doxyref{Photo\+Model}{p.}{class_photo_model} class manages a list of photo data. 

\textbackslash{}inmodule Ti\+Photo\+Locator 

\doxysubsection{Documentation des constructeurs et destructeur}
\label{class_photo_model_a244f996eed49122ebe11c5369d63a0e2} 
\index{PhotoModel@{PhotoModel}!PhotoModel@{PhotoModel}}
\index{PhotoModel@{PhotoModel}!PhotoModel@{PhotoModel}}
\doxysubsubsection{PhotoModel()}
{\footnotesize\ttfamily Photo\+Model\+::\+Photo\+Model (\begin{DoxyParamCaption}\item[{QObject $\ast$}]{parent = {\ttfamily nullptr} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}



Constructor. Just add the welcome item in the list. If the debug mode is active, a second item is added for testing purpose. 


\begin{DoxyParams}{Paramètres}
{\em parent} & \+: paramètre classique pour les QAbstract\+List\+Model. \\
\hline
\end{DoxyParams}


\doxysubsection{Documentation des fonctions membres}
\label{class_photo_model_af43bef19e91b11bf4e79c55fe458d0a1} 
\index{PhotoModel@{PhotoModel}!addTestItem@{addTestItem}}
\index{addTestItem@{addTestItem}!PhotoModel@{PhotoModel}}
\doxysubsubsection{addTestItem()}
{\footnotesize\ttfamily void Photo\+Model\+::add\+Test\+Item (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Adds a test item to the \doxyref{Photo\+Model}{p.}{class_photo_model}. (only if {\bfseries{Debug\+Mode}} is enabled in the $\ast$\+Settingss) 

\begin{DoxyNote}{Note}
For testing purpose. 
\end{DoxyNote}
\label{class_photo_model_a8a98d5f81789881189e179d6059c1586} 
\index{PhotoModel@{PhotoModel}!append@{append}}
\index{append@{append}!PhotoModel@{PhotoModel}}
\doxysubsubsection{append\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Photo\+Model\+::append (\begin{DoxyParamCaption}\item[{const QString}]{filename,  }\item[{const QString}]{url }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Adds a \doxyref{Photo}{p.}{struct_photo} to the model, with just a name and a path (url). Other data should be filled later, from exif metadata. 


\begin{DoxyParams}{Paramètres}
{\em filename} & \+: filename of the photo \\
\hline
{\em url} & \+: full path of the photo (in Qt format) \\
\hline
\end{DoxyParams}
\label{class_photo_model_a28933cf9451c4794c12325ac125f439f} 
\index{PhotoModel@{PhotoModel}!append@{append}}
\index{append@{append}!PhotoModel@{PhotoModel}}
\doxysubsubsection{append()\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Photo\+Model\+::append (\begin{DoxyParamCaption}\item[{const QVariant\+Map}]{data }\end{DoxyParamCaption})}



Adds a \doxyref{Photo}{p.}{struct_photo} item to the model, from a list of metadata. 


\begin{DoxyParams}{Paramètres}
{\em data} & \+: a \textquotesingle{}key-\/value\textquotesingle{} dictionnary of metadata. \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
Accepts only 2 keys\+: filename and image\+Url.
\end{DoxyNote}

\begin{DoxyCode}{0}
\DoxyCodeLine{QVariantMap\ map;}
\DoxyCodeLine{map.insert(\textcolor{stringliteral}{"{}filename"{}},\ QVariant(filename));}
\DoxyCodeLine{map.insert(roleNames().value(ImageUrlRole),\ QVariant(url));}

\end{DoxyCode}
 \label{class_photo_model_a297fef9ba3dd5d7c1c00593cefaf144e} 
\index{PhotoModel@{PhotoModel}!appendSavedPosition@{appendSavedPosition}}
\index{appendSavedPosition@{appendSavedPosition}!PhotoModel@{PhotoModel}}
\doxysubsubsection{appendSavedPosition}
{\footnotesize\ttfamily void Photo\+Model\+::append\+Saved\+Position (\begin{DoxyParamCaption}\item[{double}]{latitude,  }\item[{double}]{longitude }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Ajoute une entrée spéciale dans le Modèle, correspondant à une position GPS mémorisée (marker jaune). 


\begin{DoxyParams}{Paramètres}
{\em latitude} & \+: latitude au format GPS. \\
\hline
{\em longitude} & \+: longitude au format GPS. \\
\hline
\end{DoxyParams}
\label{class_photo_model_a536c2a2381b3ce827257068f5bf43933} 
\index{PhotoModel@{PhotoModel}!applyCreatorToAll@{applyCreatorToAll}}
\index{applyCreatorToAll@{applyCreatorToAll}!PhotoModel@{PhotoModel}}
\doxysubsubsection{applyCreatorToAll}
{\footnotesize\ttfamily void Photo\+Model\+::apply\+Creator\+To\+All (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Applique le "{}photographe"{} à toutes les photos du modèle. 

Le nom du photographe est configuré dans les Settings. \label{class_photo_model_aa63d16a07716d0ad5aff2ff1be183198} 
\index{PhotoModel@{PhotoModel}!belong@{belong}}
\index{belong@{belong}!PhotoModel@{PhotoModel}}
\doxysubsubsection{belong()}
{\footnotesize\ttfamily bool Photo\+Model\+::belong (\begin{DoxyParamCaption}\item[{double}]{p\+La,  }\item[{double}]{p\+Lo,  }\item[{double}]{o\+La,  }\item[{double}]{o\+Lo,  }\item[{float}]{r\+La,  }\item[{float}]{r\+Lo }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Indique si le point P de coordonnées (pX, pY) appartient au cercle de centre O (oX, oY) et de rayon R. 


\begin{DoxyParams}{Paramètres}
{\em p\+La} & \+: Latitude du point à tester. \\
\hline
{\em p\+Lo} & \+: Longitude du point à tester. \\
\hline
{\em o\+La} & \+: Latitude de l\textquotesingle{}origine du cercle. \\
\hline
{\em o\+Lo} & \+: Longitude de l\textquotesingle{}origine du cercle. \\
\hline
{\em r\+La} & \+: le rayon du cercle sur l\textquotesingle{}axe des Latitudes N-\/S(en degrés). \\
\hline
{\em r\+Lo} & \+: le rayon du cercle sur l\textquotesingle{}axe des Longitudes E-\/W (en degrés). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Renvoie}
true si le point est dans le cercle. 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
Pour être le plus rapide possible, le cercle est plutôt un carré. 
\end{DoxyNote}
\label{class_photo_model_a1ff9f0f539d9b65e0521ebbaa498b21b} 
\index{PhotoModel@{PhotoModel}!clear@{clear}}
\index{clear@{clear}!PhotoModel@{PhotoModel}}
\doxysubsubsection{clear()}
{\footnotesize\ttfamily void Photo\+Model\+::clear (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Deletes all the items of the Model. 

On utilise cette fonction quand on scanne un nouveau répertoire de photos. \label{class_photo_model_a3f09addf9a989e85b7ae5797156b270f} 
\index{PhotoModel@{PhotoModel}!data@{data}}
\index{data@{data}!PhotoModel@{PhotoModel}}
\doxysubsubsection{data()}
{\footnotesize\ttfamily QVariant Photo\+Model\+::data (\begin{DoxyParamCaption}\item[{const QModel\+Index \&}]{index,  }\item[{int}]{role = {\ttfamily Qt\+:\+:DisplayRole} }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}}



Returns the role value of an element of the model. 

\begin{DoxyNote}{Note}
Implémentation obligatoire. 
\end{DoxyNote}

\begin{DoxyParams}{Paramètres}
{\em index} & \+: index of the element of the model. \\
\hline
{\em role} & \+: the requested role (enum). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Renvoie}
the requested role value 
\end{DoxyReturn}
\label{class_photo_model_a822190ecc2081c7b49030c0f6a42317f} 
\index{PhotoModel@{PhotoModel}!dumpData@{dumpData}}
\index{dumpData@{dumpData}!PhotoModel@{PhotoModel}}
\doxysubsubsection{dumpData()}
{\footnotesize\ttfamily void Photo\+Model\+::dump\+Data (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Debug function that print (in the console) one line of the model at every call. 

\begin{DoxyNote}{Note}
Debug function. 
\end{DoxyNote}
\label{class_photo_model_aacde479b741e9f94c2077ad979e6b6a7} 
\index{PhotoModel@{PhotoModel}!duplicateData@{duplicateData}}
\index{duplicateData@{duplicateData}!PhotoModel@{PhotoModel}}
\doxysubsubsection{duplicateData}
{\footnotesize\ttfamily void Photo\+Model\+::duplicate\+Data (\begin{DoxyParamCaption}\item[{int}]{row }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Duplicates an item of the model, and add it at the end of the vector. 


\begin{DoxyParams}{Paramètres}
{\em row} & \+: item row to be duplicated. \\
\hline
\end{DoxyParams}
\label{class_photo_model_a3cc8c0b5e6803970def517a8d57ae155} 
\index{PhotoModel@{PhotoModel}!fetchExifMetadata@{fetchExifMetadata}}
\index{fetchExifMetadata@{fetchExifMetadata}!PhotoModel@{PhotoModel}}
\doxysubsubsection{fetchExifMetadata}
{\footnotesize\ttfamily void Photo\+Model\+::fetch\+Exif\+Metadata (\begin{DoxyParamCaption}\item[{int}]{photo = {\ttfamily -\/1} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Ce slot lit des données EXIF d\textquotesingle{}une (ou toutes) photos du répertoire. 


\begin{DoxyParams}{Paramètres}
{\em photo} & \+: l\textquotesingle{}indice de la photo (vide ou -\/1 = toutes les photos du répertoire) \\
\hline
\end{DoxyParams}
\label{class_photo_model_a8cd1ac5560f3897892474271c5206106} 
\index{PhotoModel@{PhotoModel}!findInCirclePhotos@{findInCirclePhotos}}
\index{findInCirclePhotos@{findInCirclePhotos}!PhotoModel@{PhotoModel}}
\doxysubsubsection{findInCirclePhotos()}
{\footnotesize\ttfamily void Photo\+Model\+::find\+In\+Circle\+Photos (\begin{DoxyParamCaption}\item[{int}]{circle\+\_\+radius }\end{DoxyParamCaption})}



Parcourt toutes les \doxyref{Photo}{p.}{struct_photo} du modèle, et flague celles qui sont à l\textquotesingle{}interieur du cercle demandé. Fonction avec mécanisme de Mutuelle Exclusion (MUTEX). 


\begin{DoxyParams}{Paramètres}
{\em circle\+\_\+radius} & Le rayon du cercle (en mètres).\\
\hline
\end{DoxyParams}
On utilise les conversions\+: {\bfseries{1°lat = 111km}} et {\bfseries{1°long = 111km x cos(lat)}}. \label{class_photo_model_a18fb19d062f2f7d7d79585d2e62c9634} 
\index{PhotoModel@{PhotoModel}!get@{get}}
\index{get@{get}!PhotoModel@{PhotoModel}}
\doxysubsubsection{get()}
{\footnotesize\ttfamily QVariant\+Map Photo\+Model\+::get (\begin{DoxyParamCaption}\item[{int}]{row }\end{DoxyParamCaption})}



La methode \doxyref{get()}{p.}{class_photo_model_a18fb19d062f2f7d7d79585d2e62c9634} (invocable par QML) renvoie les données de la photo demandée. Usage dans QML\+: {\ttfamily titre = my\+Model.\+get(1).title;} 


\begin{DoxyParams}{Paramètres}
{\em row} & \+: indice. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Renvoie}
une Map contenant toutes les propriétés de l\textquotesingle{}item, dont la propriété spéciale\+: "{}row"{}. 
\end{DoxyReturn}
\label{class_photo_model_a3c8036e57376630243dfa6841d7f2251} 
\index{PhotoModel@{PhotoModel}!getRoleName@{getRoleName}}
\index{getRoleName@{getRoleName}!PhotoModel@{PhotoModel}}
\doxysubsubsection{getRoleName()}
{\footnotesize\ttfamily QString Photo\+Model\+::get\+Role\+Name (\begin{DoxyParamCaption}\item[{int}]{role }\end{DoxyParamCaption})}



Retourne le nom du role dans le modèle. 


\begin{DoxyParams}{Paramètres}
{\em role} & la valeur numérique du role. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Renvoie}
la valeur texte du role. 
\end{DoxyReturn}
\label{class_photo_model_a1d2159990dbea68afefa28bfdd6804fe} 
\index{PhotoModel@{PhotoModel}!getUrl@{getUrl}}
\index{getUrl@{getUrl}!PhotoModel@{PhotoModel}}
\doxysubsubsection{getUrl()}
{\footnotesize\ttfamily QVariant Photo\+Model\+::get\+Url (\begin{DoxyParamCaption}\item[{int}]{row }\end{DoxyParamCaption})}



Returns the full name of the photo. This is an example of unitary getter method. 


\begin{DoxyParams}{Paramètres}
{\em row} & \+: Indice de l\textquotesingle{}élément à lire. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Renvoie}
a QVariant containing the absolute path and full name (image URL) of the photo. 
\end{DoxyReturn}
\label{class_photo_model_a1e2f3f829e54ef445a5b1dea07ad2118} 
\index{PhotoModel@{PhotoModel}!removeData@{removeData}}
\index{removeData@{removeData}!PhotoModel@{PhotoModel}}
\doxysubsubsection{removeData}
{\footnotesize\ttfamily void Photo\+Model\+::remove\+Data (\begin{DoxyParamCaption}\item[{int}]{row }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Fonction typique qui supprime l\textquotesingle{}item désigné du modèle. 


\begin{DoxyParams}{Paramètres}
{\em row} & \+: la position dans le vecteur de l\textquotesingle{}item à supprimer. \\
\hline
\end{DoxyParams}
\label{class_photo_model_a77dea7e487119a062064faa3c60ed2d6} 
\index{PhotoModel@{PhotoModel}!removePhotoKeyword@{removePhotoKeyword}}
\index{removePhotoKeyword@{removePhotoKeyword}!PhotoModel@{PhotoModel}}
\doxysubsubsection{removePhotoKeyword()}
{\footnotesize\ttfamily void Photo\+Model\+::remove\+Photo\+Keyword (\begin{DoxyParamCaption}\item[{QString}]{keyword }\end{DoxyParamCaption})}



Enlève un des mots-\/clef descriptif de la photo. 


\begin{DoxyParams}{Paramètres}
{\em keyword} & \+: le mot-\/clef à retirer de la liste. \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
Cette méthode modifie la \doxyref{Photo}{p.}{struct_photo} actuellement sélectionée. 
\end{DoxyNote}
\label{class_photo_model_a6c2e4a731969e952993dfe4d38e5788f} 
\index{PhotoModel@{PhotoModel}!removeSavedPosition@{removeSavedPosition}}
\index{removeSavedPosition@{removeSavedPosition}!PhotoModel@{PhotoModel}}
\doxysubsubsection{removeSavedPosition}
{\footnotesize\ttfamily void Photo\+Model\+::remove\+Saved\+Position (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Supprime du modèle l\textquotesingle{}item correspondant à la position sauvegardée. 

L\textquotesingle{}item {\bfseries{Saved\+Position}}, de type {\bfseries{is\+Marker}} est supprimé du modèle. \label{class_photo_model_aac3d5e1ae72e823b4e6091497c5cf27d} 
\index{PhotoModel@{PhotoModel}!roleNames@{roleNames}}
\index{roleNames@{roleNames}!PhotoModel@{PhotoModel}}
\doxysubsubsection{roleNames()}
{\footnotesize\ttfamily QHash$<$ int, QByte\+Array $>$ Photo\+Model\+::role\+Names (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}}

Table of Role names. C\textquotesingle{}est la correspondance entre le role C++ et le nom de la property dans QML. \begin{DoxyNote}{Note}
Implémentation obligatoire. 

Un appel à {\ttfamily \doxyref{role\+Names()}{p.}{class_photo_model_aac3d5e1ae72e823b4e6091497c5cf27d}.value(role);} renvoie la property (string) correspondant au role demandé. 

Un appel à {\ttfamily \doxyref{role\+Names()}{p.}{class_photo_model_aac3d5e1ae72e823b4e6091497c5cf27d}.key(property.\+to\+Utf8());} renvoie le role (int) correspondant à la property demandée. 
\end{DoxyNote}
\label{class_photo_model_a0fdbd69a007a6bda5623cce8d5f3cd57} 
\index{PhotoModel@{PhotoModel}!rowCount@{rowCount}}
\index{rowCount@{rowCount}!PhotoModel@{PhotoModel}}
\doxysubsubsection{rowCount()}
{\footnotesize\ttfamily int Photo\+Model\+::row\+Count (\begin{DoxyParamCaption}\item[{const QModel\+Index \&}]{parent }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}}



Returns the number of items in the model. 

\begin{DoxyNote}{Note}
Implémentation obligatoire. 
\end{DoxyNote}

\begin{DoxyParams}{Paramètres}
{\em parent} & \+: parent of the model. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Renvoie}
the number of elements in the model. 
\end{DoxyReturn}
\label{class_photo_model_ac393e2839ea5993f199ec669973972ef} 
\index{PhotoModel@{PhotoModel}!saveMetadata@{saveMetadata}}
\index{saveMetadata@{saveMetadata}!PhotoModel@{PhotoModel}}
\doxysubsubsection{saveMetadata}
{\footnotesize\ttfamily void Photo\+Model\+::save\+Metadata (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Ce slot écrit dans les fichiers JPG (de façon asynchrone) les metadonnées IPTC des photos qui ont été modifiées. 

\begin{DoxyNote}{Note}
Tag obligatoire\+: {\ttfamily image\+Url}. 

Tags modifiés\+: {\ttfamily GPS coords, Creator, City, Country, Location, Date\+Time\+Original}. 

Tags automatiques\+: {\ttfamily GPS Ref, Metadata\+Editing\+Software}. 
\end{DoxyNote}
\label{class_photo_model_aa9fed3a1b288e554337ded22bdb1cf35} 
\index{PhotoModel@{PhotoModel}!selectedRow@{selectedRow}}
\index{selectedRow@{selectedRow}!PhotoModel@{PhotoModel}}
\doxysubsubsection{selectedRow()}
{\footnotesize\ttfamily void Photo\+Model\+::selected\+Row (\begin{DoxyParamCaption}\item[{const int}]{row }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Mémorise la photo indiquée comme étant la photo sélectionnée dans la List\+View. 

Met le flag {\bfseries{is\+Selected}} du précédent item à {\itshape False} et le nouveau à {\itshape True}. 
\begin{DoxyParams}{Paramètres}
{\em row} & \+: l\textquotesingle{}indice de l\textquotesingle{}item sélectionné dans la List\+View. \\
\hline
\end{DoxyParams}
\label{class_photo_model_ad7a5d45624200d819ee0ab429387baa0} 
\index{PhotoModel@{PhotoModel}!setData@{setData}}
\index{setData@{setData}!PhotoModel@{PhotoModel}}
\doxysubsubsection{setData()\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily bool Photo\+Model\+::set\+Data (\begin{DoxyParamCaption}\item[{const QModel\+Index \&}]{index,  }\item[{const QVariant \&}]{value,  }\item[{int}]{role }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}



Surcharge qui permet de modifier {\bfseries{unitairement}} un Role d\textquotesingle{}un item du modèle. 

Cette fonction met aussi à {\itshape True} le flag {\bfseries{To Be Saved}} car il s\textquotesingle{}agit d\textquotesingle{}une action opérateur. Cette fonction est appelée quand on clique sur un Chips, pour modifier une des propriétés de la \doxyref{Photo}{p.}{struct_photo}. Certains roles ne sont pas modifiables\+: {\ttfamily image\+Url, is\+Selected, has\+GPS, filename, shutter\+Speed, F-\/number}, etc. \begin{DoxySeeAlso}{Voir également}
{\texttt{ https\+://doc.\+qt.\+io/qt-\/5/qtquick-\/modelviewsdata-\/cppmodels.\+html\#qabstractitemmodel-\/subclass}} 
\end{DoxySeeAlso}
\begin{DoxyNote}{Note}
\+: Il est important d\textquotesingle{}émettre le signal {\ttfamily data\+Changed()} after saving the changes.
\end{DoxyNote}

\begin{DoxyParams}{Paramètres}
{\em index} & \+: l\textquotesingle{}index (au sens QModel\+Index) de l\textquotesingle{}item à modifier. \\
\hline
{\em value} & \+: la nouvelle valeur. \\
\hline
{\em role} & \+: le Role à modifier ({\ttfamily Latitude\+Role, Longitude\+Role, To\+Be\+Saved\+Role, city, country}). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Renvoie}
{\itshape true} si la modification a réussi. {\itshape False} si l\textquotesingle{}index n\textquotesingle{}est pas valide, ou si la nouvelle valeur est identique à l\textquotesingle{}existante. 
\end{DoxyReturn}
\label{class_photo_model_a606c1207c36cdf5e81f346ca82cec2d8} 
\index{PhotoModel@{PhotoModel}!setData@{setData}}
\index{setData@{setData}!PhotoModel@{PhotoModel}}
\doxysubsubsection{setData()\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily void Photo\+Model\+::set\+Data (\begin{DoxyParamCaption}\item[{const QVariant\+Map \&}]{value\+\_\+list }\end{DoxyParamCaption})}



Cette méthode permet de modifier plusieurs roles d\textquotesingle{}un item du modèle, avec comme clef le role {\bfseries{Filename\+Role}}. Elle est appelée lors de la lecture (ou relecture) globale des tags Exif des photos originales. 

Roles non modifiables (ignorés)\+: {\ttfamily image\+Url, inside\+Circle}.~\newline
 Roles non modifiables (recalculés)\+: {\ttfamily has\+GPS, to\+Be\+Saved}.~\newline
 Cette fonction positionne le flag {\bfseries{To\+Be\+Saved}} à {\itshape False}.~\newline
 
\begin{DoxyParams}{Paramètres}
{\em value\+\_\+list} & \+: la liste des données à modifier. Attention\+: les keys sont les noms des balises EXIF. {\ttfamily File\+Name} est obligatoire. \\
\hline
\end{DoxyParams}
\label{class_photo_model_a5aef53c6395a6ccd579a019c62e472e0} 
\index{PhotoModel@{PhotoModel}!setData@{setData}}
\index{setData@{setData}!PhotoModel@{PhotoModel}}
\doxysubsubsection{setData\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily void Photo\+Model\+::set\+Data (\begin{DoxyParamCaption}\item[{int}]{row,  }\item[{QString}]{value,  }\item[{QString}]{property }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Ce slot ajoute ou modifie une propriété d\textquotesingle{}une \doxyref{Photo}{p.}{struct_photo}, par exemple quand on clique sur une suggestion. 


\begin{DoxyParams}{Paramètres}
{\em row} & \+: indice de la photo. \\
\hline
{\em value} & \+: valeur de la propriété. \\
\hline
{\em property} & \+: nom de la propriété. \\
\hline
\end{DoxyParams}
\label{class_photo_model_aa35674fe9c8ec79d2993ce56614bb909} 
\index{PhotoModel@{PhotoModel}!setInCircleItemCoords@{setInCircleItemCoords}}
\index{setInCircleItemCoords@{setInCircleItemCoords}!PhotoModel@{PhotoModel}}
\doxysubsubsection{setInCircleItemCoords}
{\footnotesize\ttfamily void Photo\+Model\+::set\+In\+Circle\+Item\+Coords (\begin{DoxyParamCaption}\item[{const double}]{latitude,  }\item[{const double}]{longitude }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Ce slot affecte les coordonnées GPS fournies à toutes les photos géographiquement situées à l\textquotesingle{}interieur du cercle rouge. 


\begin{DoxyParams}{Paramètres}
{\em latitude} & \+: Latitude GPS à affecter aux photos \\
\hline
{\em longitude} & \+: Longitude GPS à affecter aux photos \\
\hline
\end{DoxyParams}
\label{class_photo_model_a50dc093e369a2741b62aa03556df061c} 
\index{PhotoModel@{PhotoModel}!setPhotoProperty@{setPhotoProperty}}
\index{setPhotoProperty@{setPhotoProperty}!PhotoModel@{PhotoModel}}
\doxysubsubsection{setPhotoProperty}
{\footnotesize\ttfamily void Photo\+Model\+::set\+Photo\+Property (\begin{DoxyParamCaption}\item[{const int}]{photo,  }\item[{const QString}]{value,  }\item[{const QString}]{property }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Ce slot affecte le role fourni à toutes les photos géographiquement situées à l\textquotesingle{}interieur du cercle rouge. 


\begin{DoxyParams}{Paramètres}
{\em photo} & \+: l\textquotesingle{}indice de la \doxyref{Photo}{p.}{struct_photo} à modifier. Voir la note pour les valeurs particulières. \\
\hline
{\em value} & \+: la valeur \\
\hline
{\em property} & \+: le nom de la property correspondant au Role \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
Valeurs particulières du paramètre {\ttfamily photo}\+: \begin{DoxyItemize}
\item La valeur spéciale -\/1 signifie {\bfseries{toutes les photos}}. \item La valeur spéciale -\/2 signifie {\bfseries{la photo sélectionée}}. \item La valeur spéciale -\/3 signifie {\bfseries{les photos du cercle}}. \end{DoxyItemize}

\end{DoxyNote}
\label{class_photo_model_a582509a3df1c2f9c0e6ae9f7c89e0294} 
\index{PhotoModel@{PhotoModel}!setSelectedItemCoords@{setSelectedItemCoords}}
\index{setSelectedItemCoords@{setSelectedItemCoords}!PhotoModel@{PhotoModel}}
\doxysubsubsection{setSelectedItemCoords}
{\footnotesize\ttfamily void Photo\+Model\+::set\+Selected\+Item\+Coords (\begin{DoxyParamCaption}\item[{const double}]{latitude,  }\item[{const double}]{longitude }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Affecte les coordonnées GPS fournies à la photo actuellement sélectionnée. 


\begin{DoxyParams}{Paramètres}
{\em latitude} & \+: Latitude GPS à affecter. \\
\hline
{\em longitude} & \+: Longitude GPS à affecter. \\
\hline
\end{DoxyParams}
\label{class_photo_model_a3260014636b9e9ae523391a753be104c} 
\index{PhotoModel@{PhotoModel}!updatePhotoKeyword@{updatePhotoKeyword}}
\index{updatePhotoKeyword@{updatePhotoKeyword}!PhotoModel@{PhotoModel}}
\doxysubsubsection{updatePhotoKeyword()}
{\footnotesize\ttfamily void Photo\+Model\+::update\+Photo\+Keyword (\begin{DoxyParamCaption}\item[{QString}]{keyword,  }\item[{int}]{index }\end{DoxyParamCaption})}



Modifie un des mots-\/clef descriptif de la photo. 


\begin{DoxyParams}{Paramètres}
{\em keyword} & \+: la nouvelle valeur du mot-\/clef. \\
\hline
{\em index} & \+: la position du mot-\/clef dans la liste. \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
Cette méthode modifie la \doxyref{Photo}{p.}{struct_photo} actuellement sélectionée. 
\end{DoxyNote}


La documentation de cette classe a été générée à partir des fichiers suivants \+:\begin{DoxyCompactItemize}
\item 
Models/Photo\+Model.\+h\item 
Models/Photo\+Model.\+cpp\end{DoxyCompactItemize}
